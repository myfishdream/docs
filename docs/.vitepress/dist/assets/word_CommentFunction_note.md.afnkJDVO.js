import{_ as a,c as t,a2 as n,G as l,B as e,o as p}from"./chunks/framework.BhYLs7xu.js";const h="/docs/assets/image-20250125125042756.ZLbS9d-7.png",k="/docs/assets/image-20250125125109629.CcKA2uvJ.png",F=JSON.parse('{"title":"评论功能","description":"","frontmatter":{},"headers":[],"relativePath":"word/CommentFunction/note.md","filePath":"word/CommentFunction/note.md"}'),r={name:"word/CommentFunction/note.md"};function o(d,s,c,E,g,u){const i=e("Giscus");return p(),t("div",null,[s[0]||(s[0]=n('<h1 id="评论功能" tabindex="-1">评论功能 <a class="header-anchor" href="#评论功能" aria-label="Permalink to &quot;评论功能&quot;">​</a></h1><p>基于vitepress搭建的博客添加一个评论功能</p><p><strong>Giscus</strong> 是一个基于 <strong>GitHub Discussions</strong> 的评论系统，适合技术博客或个人网站。它将评论与 GitHub Discussions 绑定，用户可以通过 GitHub 账号登录并发表评论。以下是具体的使用步骤：</p><h2 id="准备工作" tabindex="-1"><strong>准备工作</strong> <a class="header-anchor" href="#准备工作" aria-label="Permalink to &quot;**准备工作**&quot;">​</a></h2><p><strong>确保 GitHub 仓库已启用 Discussions</strong></p><ol><li>打开你的 GitHub 仓库。</li><li>点击顶部菜单的 <code>Settings</code>。</li><li>在左侧菜单中找到 <code>General</code>，向下滚动到 <code>Features</code> 部分。</li><li>勾选 <code>Discussions</code>，启用 Discussions 功能。</li></ol><p><img src="'+h+'" alt="image-20250125125042756"></p><p><img src="'+k+`" alt="image-20250125125109629"></p><p><strong>安装 Giscus App</strong></p><ol><li>访问 <a href="https://github.com/apps/giscus" target="_blank" rel="noreferrer">Giscus App</a>。</li><li>点击 <code>Install</code>，选择你的 GitHub 仓库并授权。</li></ol><h2 id="配置-giscus" tabindex="-1"><strong>配置 Giscus</strong> <a class="header-anchor" href="#配置-giscus" aria-label="Permalink to &quot;**配置 Giscus**&quot;">​</a></h2><p><strong>获取 Giscus 配置</strong></p><ol><li>访问 <a href="https://giscus.app/" target="_blank" rel="noreferrer">Giscus 官网</a>。</li><li>填写以下信息： <ul><li><strong>Repository</strong>: 你的 GitHub 仓库（格式：<code>用户名/仓库名</code>）。</li><li><strong>Discussion Category</strong>: 选择一个 Discussions 分类（如果没有，可以在 GitHub 仓库中创建）。</li><li><strong>Mapping</strong>: 选择 <code>pathname</code>，确保每篇文章的评论独立。</li><li><strong>Theme</strong>: 选择评论框的主题（如 <code>light</code>、<code>dark</code> 等）。</li></ul></li><li>填写完成后，Giscus 会生成一段 <strong>JavaScript</strong> 代码。</li></ol><h2 id="在-vitepress-中集成-giscus" tabindex="-1"><strong>在 VitePress 中集成 Giscus</strong> <a class="header-anchor" href="#在-vitepress-中集成-giscus" aria-label="Permalink to &quot;**在 VitePress 中集成 Giscus**&quot;">​</a></h2><p><strong>创建 Giscus 组件</strong></p><ol><li><p>在 VitePress 项目的 <code>docs/.vitepress/theme/components</code> 目录下，创建一个 <code>Giscus.vue</code> 文件。</p></li><li><p>将 Giscus 生成的 <strong>JavaScript</strong> 代码转换为 <strong>Vue</strong> 组件。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;giscus&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;giscus&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">export default {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    const script </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;script&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    script.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;https://giscus.app/client.js&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    script.setAttribute(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data-repo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;你的GitHub用户名/你的仓库名&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    script.setAttribute(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data-repo-id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;你的仓库ID&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    script.setAttribute(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data-category&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;你的分类名&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    script.setAttribute(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data-category-id&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;你的分类ID&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    script.setAttribute(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data-mapping&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;pathname&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    script.setAttribute(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data-reactions-enabled&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    script.setAttribute(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data-theme&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;light&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    script.setAttribute(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;crossorigin&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;anonymous&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    script.async = true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    this.$refs.giscus.appendChild(script)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/script&gt;</span></span></code></pre></div><blockquote><p><strong>注意</strong>：</p><ul><li><code>data-repo</code> 是你的 GitHub 仓库（格式：<code>用户名/仓库名</code>）。</li><li><code>data-repo-id</code> 和 <code>data-category-id</code> 可以通过 GitHub API 获取，或者直接从 Giscus 官网生成的代码中复制。</li></ul></blockquote></li></ol><p><strong>注册 Giscus 组件</strong></p><ol><li><p>在 <code>docs/.vitepress/theme/index.ts</code> 或 <code>docs/.vitepress/theme/index.js</code> 中注册 Giscus 组件。</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DefaultTheme </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vitepress/theme&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Giscus </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./components/Giscus.vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DefaultTheme,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  enhanceApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Giscus&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Giscus)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div></li></ol><h2 id="在-markdown-文件中使用-giscus" tabindex="-1"><strong>在 Markdown 文件中使用 Giscus</strong> <a class="header-anchor" href="#在-markdown-文件中使用-giscus" aria-label="Permalink to &quot;**在 Markdown 文件中使用 Giscus**&quot;">​</a></h2><ol><li><p>在需要添加评论的 Markdown 文件中，插入 Giscus 组件。</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-light-font-weight:bold;--shiki-dark:#79B8FF;--shiki-dark-font-weight:bold;">## 评论</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;Giscus /&gt;</span></span></code></pre></div></li><li><p>保存文件并启动 VitePress 开发服务器：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docs:dev</span></span></code></pre></div></li><li><p>打开浏览器，访问页面，即可看到 Giscus 评论框。</p></li></ol><h2 id="删除评论" tabindex="-1">删除评论 <a class="header-anchor" href="#删除评论" aria-label="Permalink to &quot;删除评论&quot;">​</a></h2><p><strong>删除单条评论</strong></p><p>1.<strong>进入 GitHub Discussions</strong>：</p><ul><li>打开你的 GitHub 仓库。</li><li>点击顶部菜单的 <code>Discussions</code>，找到与评论相关的 Discussion。</li></ul><p>2.<strong>找到评论</strong>：</p><ul><li>在 Discussion 中，找到需要删除的评论。</li></ul><p>3.<strong>删除评论</strong>：</p><ul><li>点击评论右上角的 <code>···</code> 按钮。</li><li>选择 <code>Delete comment</code>。</li><li>确认删除。</li></ul><p><strong>删除整个 Discussion（删除所有评论）</strong></p><p>如果某个页面的评论不再需要，可以直接删除整个 Discussion。</p><ol><li><strong>进入 GitHub Discussions</strong>： <ul><li>打开你的 GitHub 仓库。</li><li>点击顶部菜单的 <code>Discussions</code>，找到需要删除的 Discussion。</li></ul></li><li><strong>删除 Discussion</strong>： <ul><li>点击 Discussion 右上角的 <code>···</code> 按钮。</li><li>选择 <code>Delete discussion</code>。</li><li>确认删除。</li></ul></li></ol><h2 id="自定义-giscus" tabindex="-1"><strong>自定义 Giscus</strong> <a class="header-anchor" href="#自定义-giscus" aria-label="Permalink to &quot;**自定义 Giscus**&quot;">​</a></h2><h3 id="修改主题" tabindex="-1"><strong>修改主题</strong> <a class="header-anchor" href="#修改主题" aria-label="Permalink to &quot;**修改主题**&quot;">​</a></h3><p>Giscus 支持多种主题，可以在 <code>Giscus.vue</code> 中修改 <code>data-theme</code> 属性。</p><h3 id="支持多语言" tabindex="-1"><strong>支持多语言</strong> <a class="header-anchor" href="#支持多语言" aria-label="Permalink to &quot;**支持多语言**&quot;">​</a></h3><p>Giscus 支持多语言，可以通过 <code>data-lang</code> 属性设置语言。</p><h2 id="注意事项" tabindex="-1"><strong>注意事项</strong> <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;**注意事项**&quot;">​</a></h2><ul><li><strong>仓库公开性</strong>：如果仓库是私有的，评论功能将无法使用。确保仓库是公开的。</li><li><strong>Discussions 分类</strong>：确保 Discussions 分类已正确设置，否则评论无法显示。</li><li><strong>缓存问题</strong>：如果修改了 Giscus 配置但未生效，尝试清除浏览器缓存。</li></ul><h2 id="评论" tabindex="-1">评论 <a class="header-anchor" href="#评论" aria-label="Permalink to &quot;评论&quot;">​</a></h2>`,39)),l(i)])}const m=a(r,[["render",o]]);export{F as __pageData,m as default};
